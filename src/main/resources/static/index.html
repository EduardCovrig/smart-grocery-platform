<!doctype html>
<html>
<head>
    <title>Produse alimentare</title>
    <link href="style_index.css" rel="stylesheet">
</head>
<body>
    <div class="main-app">
        <div class="content-container">
            <div class="sidebar">
                <div class="sidebar-header">
                    <p class="store-name">EdwC Store</p>
                </div>
                <div class="sidebar-content">
                    <p class="sidebar-item">Produse</p>
                    <a href="#" class="sidebar-link">Fructe & Legume</a>
                    <a href="#" class="sidebar-link">Lactate</a>
                </div>
            </div>
            <div class="topbar">
                <p class="topbar-item">Bine ai venit, EdwC</p>
                <div class="search-bar">
                    <input type="text" placeholder="Cauta produse...">
                </div>
                <button class="login-button">Log in</button>
            </div>
            <div class="main-content">
                <p class="page-title">Produse alimentare</p>
                <div id="products-list"></div>
            </div>
        </div>
    </div>
</body>
<script>
    async function loadProducts() {
        try {
            const response = await fetch('/api/products')
            if (!response.ok) throw new Error('Network response was not ok');
    
            const products = await response.json();
            const productsList = document.getElementById('products-list');
            productsList.innerHTML = ''; //sterge content existent deja, refresh
    
            products.forEach(product => {
                const productDiv = document.createElement('div');
                productDiv.className = 'product-item';
                productDiv.innerHTML = 
                `
                    <h2>${product.name}</h2>
                    <p>Price: ${product.price} â‚¬</p>
                `;
                productsList.append(productDiv);
            });
        } catch (error) {
            console.error('Error fetching products:', error);
        }
    }
    

    //window.onload = loadProducts;
    document.addEventListener('DOMContentLoaded',loadProducts);
    </script>
    
</html>